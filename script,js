// âœ… 1. Mensaje al hacer clic en cualquier botÃ³n (ya lo tenÃ­as)
document.querySelectorAll("button, .btn").forEach(btn => {
  btn.addEventListener("click", () => {
    alert("Pronto se habilitarÃ¡ el pago automÃ¡tico. ContÃ¡ctanos por WhatsApp para comprar.");
  });
});

// âœ… 2. Animaciones al hacer scroll (fade in a las tarjetas)
document.addEventListener("DOMContentLoaded", () => {
  const elements = document.querySelectorAll('.product-card');

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  });

  elements.forEach(el => observer.observe(el));
});

// âœ… 3. Dark Mode toggle
const toggle = document.getElementById('dark-toggle');
if (toggle) {
  toggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    toggle.innerText = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ðŸŒ™';
  });
}

// âœ… 4. Contador animado de entregas
function animateCounter(id, end, duration) {
  let start = 0;
  const stepTime = Math.abs(Math.floor(duration / end));
  const obj = document.getElementById(id);
  if (!obj) return;

  const timer = setInterval(() => {
    start++;
    obj.innerText = start.toLocaleString(); // separador de miles
    if (start >= end) clearInterval(timer);
  }, stepTime);
}
animateCounter("counter", 1200, 1000);

// âœ… 5. Copiar WhatsApp al portapapeles
function copyText(text) {
  navigator.clipboard.writeText(text).then(() => {
    alert("NÃºmero copiado al portapapeles âœ…");
  }).catch(err => {
    console.error("Error al copiar:", err);
  });
}
document.addEventListener('DOMContentLoaded', () => {
  const supportBtn = document.getElementById('support-btn');
  const chat = document.getElementById('support-chat');
  const closeChatBtn = document.getElementById('close-chat');
  const chatMessages = document.getElementById('chat-messages');
  const chatOptions = document.getElementById('chat-options');

  // ConversaciÃ³n predeterminada
  const conversation = {
    start: {
      message: 'Hola ðŸ‘‹, Â¿en quÃ© podemos ayudarte hoy?',
      options: [
        { text: 'Problemas con compra', next: 'compra' },
        { text: 'Dudas sobre producto', next: 'producto' },
        { text: 'Contacto directo', next: 'contacto' },
      ]
    },
    compra: {
      message: 'Â¿QuÃ© problema tienes con la compra?',
      options: [
        { text: 'No recibÃ­ mi pedido', next: 'pedido' },
        { text: 'Quiero cancelar una orden', next: 'cancelar' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    producto: {
      message: 'Â¿Sobre quÃ© producto tienes dudas?',
      options: [
        { text: 'Discord Nitro', next: 'nitro' },
        { text: 'Server Boost', next: 'boost' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    contacto: {
      message: 'Puedes contactarnos vÃ­a WhatsApp haciendo clic aquÃ­:',
      options: [
        { text: 'Abrir WhatsApp', next: 'end', action: () => {
          window.open('https://wa.me/1234567890', '_blank');
        }},
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    pedido: {
      message: 'Por favor espera 24 horas, si no recibes tu pedido despuÃ©s de ese tiempo, contÃ¡ctanos.',
      options: [
        { text: 'Volver al inicio', next: 'start' }
      ]
    },
    cancelar: {
      message: 'Para cancelar una orden, envÃ­anos tu nÃºmero de pedido por WhatsApp.',
      options: [
        { text: 'Abrir WhatsApp', next: 'end', action: () => {
          window.open('https://wa.me/1234567890', '_blank');
        }},
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    nitro: {
      message: 'El Discord Nitro te da muchas ventajas, Â¿quieres saber mÃ¡s?',
      options: [
        { text: 'SÃ­, mÃ¡s info', next: 'infoNitro' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    boost: {
      message: 'El Server Boost mejora tu servidor. Â¿Quieres saber precios?',
      options: [
        { text: 'SÃ­, precios', next: 'preciosBoost' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    infoNitro: {
      message: 'Discord Nitro ofrece emojis personalizados, mejor calidad y mÃ¡s. Â¿Quieres comprar?',
      options: [
        { text: 'SÃ­, comprar', next: 'contacto' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    preciosBoost: {
      message: 'Server Boosts desde $3.99 al mes. Â¿Quieres comprar?',
      options: [
        { text: 'SÃ­, comprar', next: 'contacto' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    end: {
      message: 'Gracias por contactarnos. Â¡Que tengas un buen dÃ­a! ðŸ˜Š',
      options: []
    }
  };

  // Mostrar el chat u ocultarlo
  supportBtn.addEventListener('click', () => {
    chat.classList.toggle('hidden');
    if (!chat.classList.contains('hidden')) {
      startChat();
    }
  });

  closeChatBtn.addEventListener('click', () => {
    chat.classList.add('hidden');
  });

  // FunciÃ³n para mostrar un mensaje del bot
  function addBotMessage(text) {
    const msg = document.createElement('div');
    msg.classList.add('chat-message', 'bot-message');
    msg.textContent = text;
    chatMessages.appendChild(msg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // FunciÃ³n para mostrar una opciÃ³n seleccionable
  function addOptionButton(text, onClick) {
    const btn = document.createElement('button');
    btn.textContent = text;
    btn.addEventListener('click', onClick);
    chatOptions.appendChild(btn);
  }

  // Limpiar opciones y mensajes si quieres (pero en este caso solo opciones)
  function clearOptions() {
    chatOptions.innerHTML = '';
  }

  // FunciÃ³n para manejar cada paso de la conversaciÃ³n
  function handleStep(stepKey) {
    clearOptions();
    if (!conversation[stepKey]) return;
    const step = conversation[stepKey];
    addBotMessage(step.message);

    if (step.options.length === 0) {
      // Finalizar chat si no hay opciones
      addOptionButton('Cerrar chat', () => {
        chat.classList.add('hidden');
        chatMessages.innerHTML = '';
        clearOptions();
      });
      return;
    }

    step.options.forEach(opt => {
      addOptionButton(opt.text, () => {
        addUserMessage(opt.text);
        if (opt.action) opt.action();
        chatMessages.scrollTop = chatMessages.scrollHeight;
        chatOptions.innerHTML = '';
        setTimeout(() => handleStep(opt.next), 700);
      });
    });
  }

  // Mostrar mensaje usuario
  function addUserMessage(text) {
    const msg = document.createElement('div');
    msg.classList.add('chat-message', 'user-message');
    msg.textContent = text;
    chatMessages.appendChild(msg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // Iniciar chat
  function startChat() {
    chatMessages.innerHTML = '';
    clearOptions();
    handleStep('start');
  }
});
const supportBtn = document.getElementById('support-btn'); // ID de tu botÃ³n soporte
const supportChat = document.getElementById('support-chat');
const closeChatBtn = document.getElementById('close-chat');
const chatBody = document.getElementById('chat-body');

supportBtn.addEventListener('click', () => {
  supportChat.classList.toggle('hidden');
});

closeChatBtn.addEventListener('click', () => {
  supportChat.classList.add('hidden');
});

chatBody.addEventListener('click', e => {
  if (e.target.classList.contains('chat-option')) {
    const answer = e.target.getAttribute('data-answer');
    const response = document.createElement('div');
    response.classList.add('chat-message');
    response.textContent = answer;
    chatBody.appendChild(response);
    chatBody.scrollTop = chatBody.scrollHeight;
  }
});
document.addEventListener('DOMContentLoaded', () => {
  const supportBtn = document.getElementById('support-btn');
  const chat = document.getElementById('support-chat');
  const closeChatBtn = document.getElementById('close-chat');
  const chatMessages = document.getElementById('chat-messages');
  const chatOptions = document.getElementById('chat-options');

  // ConversaciÃ³n predeterminada
  const conversation = {
    start: {
      message: 'Hola ðŸ‘‹, Â¿en quÃ© podemos ayudarte hoy?',
      options: [
        { text: 'Problemas con compra', next: 'compra' },
        { text: 'Dudas sobre producto', next: 'producto' },
        { text: 'Contacto directo', next: 'contacto' },
      ]
    },
    compra: {
      message: 'Â¿QuÃ© problema tienes con la compra?',
      options: [
        { text: 'No recibÃ­ mi pedido', next: 'pedido' },
        { text: 'Quiero cancelar una orden', next: 'cancelar' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    producto: {
      message: 'Â¿Sobre quÃ© producto tienes dudas?',
      options: [
        { text: 'Discord Nitro', next: 'nitro' },
        { text: 'Server Boost', next: 'boost' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    contacto: {
      message: 'Puedes contactarnos vÃ­a WhatsApp haciendo clic aquÃ­:',
      options: [
        { text: 'Abrir WhatsApp', next: 'end', action: () => {
          window.open('https://wa.me/1234567890', '_blank');
        }},
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    pedido: {
      message: 'Por favor espera 24 horas, si no recibes tu pedido despuÃ©s de ese tiempo, contÃ¡ctanos.',
      options: [
        { text: 'Volver al inicio', next: 'start' }
      ]
    },
    cancelar: {
      message: 'Para cancelar una orden, envÃ­anos tu nÃºmero de pedido por WhatsApp.',
      options: [
        { text: 'Abrir WhatsApp', next: 'end', action: () => {
          window.open('https://wa.me/1234567890', '_blank');
        }},
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    nitro: {
      message: 'El Discord Nitro te da muchas ventajas, Â¿quieres saber mÃ¡s?',
      options: [
        { text: 'SÃ­, mÃ¡s info', next: 'infoNitro' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    boost: {
      message: 'El Server Boost mejora tu servidor. Â¿Quieres saber precios?',
      options: [
        { text: 'SÃ­, precios', next: 'preciosBoost' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    infoNitro: {
      message: 'Discord Nitro ofrece emojis personalizados, mejor calidad y mÃ¡s. Â¿Quieres comprar?',
      options: [
        { text: 'SÃ­, comprar', next: 'contacto' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    preciosBoost: {
      message: 'Server Boosts desde $3.99 al mes. Â¿Quieres comprar?',
      options: [
        { text: 'SÃ­, comprar', next: 'contacto' },
        { text: 'Volver al inicio', next: 'start' },
      ]
    },
    end: {
      message: 'Gracias por contactarnos. Â¡Que tengas un buen dÃ­a! ðŸ˜Š',
      options: []
    }
  };

  // Mostrar el chat u ocultarlo
  supportBtn.addEventListener('click', () => {
    chat.classList.toggle('hidden');
    if (!chat.classList.contains('hidden')) {
      startChat();
    }
  });

  closeChatBtn.addEventListener('click', () => {
    chat.classList.add('hidden');
  });

  // FunciÃ³n para mostrar un mensaje del bot
  function addBotMessage(text) {
    const msg = document.createElement('div');
    msg.classList.add('chat-message', 'bot-message');
    msg.textContent = text;
    chatMessages.appendChild(msg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // FunciÃ³n para mostrar una opciÃ³n seleccionable
  function addOptionButton(text, onClick) {
    const btn = document.createElement('button');
    btn.textContent = text;
    btn.addEventListener('click', onClick);
    chatOptions.appendChild(btn);
  }

  // Limpiar opciones y mensajes si quieres (pero en este caso solo opciones)
  function clearOptions() {
    chatOptions.innerHTML = '';
  }

  // FunciÃ³n para manejar cada paso de la conversaciÃ³n
  function handleStep(stepKey) {
    clearOptions();
    if (!conversation[stepKey]) return;
    const step = conversation[stepKey];
    addBotMessage(step.message);

    if (step.options.length === 0) {
      // Finalizar chat si no hay opciones
      addOptionButton('Cerrar chat', () => {
        chat.classList.add('hidden');
        chatMessages.innerHTML = '';
        clearOptions();
      });
      return;
    }

    step.options.forEach(opt => {
      addOptionButton(opt.text, () => {
        addUserMessage(opt.text);
        if (opt.action) opt.action();
        chatMessages.scrollTop = chatMessages.scrollHeight;
        chatOptions.innerHTML = '';
        setTimeout(() => handleStep(opt.next), 700);
      });
    });
  }

  // Mostrar mensaje usuario
  function addUserMessage(text) {
    const msg = document.createElement('div');
    msg.classList.add('chat-message', 'user-message');
    msg.textContent = text;
    chatMessages.appendChild(msg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // Iniciar chat
  function startChat() {
    chatMessages.innerHTML = '';
    clearOptions();
    handleStep('start');
  }
});

